<main>
    <section>        
        <div class="container">
            <h2 class="text-center py-5  fw-bold" *ngIf="cartItems.length > 0">Carrito de Compras</h2>
            <div class="d-flex justify-content-center">
                <table class="table table-borderless" *ngIf="cartItems.length > 0" style="max-width: 40rem;">

                    <thead class="table-warning">
                        <tr>
                            <th>Ítem</th>
                            <th>Nombre</th>
                            <th>Precio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of cartItems; let index = index">
                            <td>{{index + 1}}</td>
                            <td>{{ item.name }}</td>
                            <td>${{ item.price | number: '1.2-2' }}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                          <td colspan="2" class="fw-bold">Total:</td>
                          <td class="fw-bold">${{total | number: '1.2-2' }}</td>
                        </tr>
                      </tfoot>
                </table>
                
            </div>
            <div class=" d-flex justify-content-center w-100" *ngIf="cartItems.length > 0">
                <button class="btn btn-warning m-2" (click)="clearCart()">Vaciar Carrito</button>
                <button class="btn btn-success m-2" (click)="confirmPurchase()">Confirmar compra</button>
            </div>
            <div *ngIf="cartItems.length === 0">
                <p class="text-center fw-bold fs-3 py-5">El carrito está vacío.<i class="bi bi-cart-x text-white fs-3"></i></p>
            </div>
        </div>
        <div *ngIf="showPurchaseMessage" id="alertPurchase" class="alert alert-success mt-3 w-50 fade-in-out fw-bold" role="alert">
            <h3 class="text-center text-success">Compra realizada con éxito</h3>
            <p>Id de transacción: {{purchase.id}}</p>
            <p>Medio de pago: Transferencia</p>            
            <p>Los productos serán despachados en la dirección indicada en su cuenta</p>
            <p>Total de la compra: ${{purchase.total | number: '1.2-2' }}</p>
            <div class="d-flex justify-content-center"><button class="btn btn-primary" (click)="closeAlertPurchase()">Entendido</button></div>
        </div>
    </section>
    
</main>